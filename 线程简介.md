### 线程详解

[TOC]



#### 线程简介

##### 多任务

现实中太多这样同时做多件事情的例子了，看起来是多个任务都在做，其实本质上我们的大脑在同一时间依旧只做了一件事情

##### 多线程

原来是一条路，慢慢因为车太多了，道路堵塞，效率极低。

为了提高使用的效率，能够充分利用道路，于是加了多个车道

##### 普通方法调用和多线程

![image-20200902180346865](C:\Users\Tao\AppData\Roaming\Typora\typora-user-images\image-20200902180346865.png)

##### 程序、进程、线程

在操作系统中运行的程序就是进程。

一个进程可以有多个线程，如视频中同时听声音，看图像，看弹幕

##### Process与Thread

* 说起进程，就不得不说下程序。程序是指令和数据的有序集合，其本身没有任何运行的含义，是一个静态的概念
* 而进程则是执行程序的一次执行过程，它是一个动态的概念。是系统资源分配的单位
* 通常在一个进程中可以包含若干个线程，当然一个进程中至少有一个线程，不然没有存在的意义。线程是CPU调度和执行的单位

> 很多多线程是模拟出来的，真正的多线程是指有多个cpu，即多核，如服务器。如果是模拟出来的多线程，即在一个cpu的情况下，在同一个时间点，cpu只能执行一个代码，因为切换的很快，所以就有同时执行的错局

##### 概念

* 线程就是独立的执行路径
* 在程序运行时，即使没有自己创建线程，后台也会有多个线程，如主线程，gc线程
* main()称之为主线程，为系统的入口，用于执行整个程序
* 在一个进程中，如果开辟了多个线程，线程的运行由调度器安排调度，调度器是与操作系统紧密相关的，先后顺序是不能认为的干预的
* 对同一份资源操作时，会存在资源抢夺的问题，需要加入并发控制
* 线程会带来额外的开销，如cpu调度时间，并发控制开销
* 每个线程在自己的工作内存交互，内存控制不当会造成数据不一致

#### 线程创建

* 三种创建方式

  * Thread class：集成Thread类
  * Runnable 接口：实现Runnable接口
  * Callable 接口：实现Callable接口

  